<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ContinueWithGoogle.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: ContinueWithGoogle.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// import React from 'react';

import { GoogleLogin } from 'react-google-login';
import { gapi } from 'gapi-script';
import { useEffect, useState } from 'react';
import { FcGoogle } from 'react-icons/fc';
import { useNavigate } from 'react-router-dom';
import GeneralButton from './GeneralButton';
import continueWithGoogle from '../../services/requests/continueWithGoogle';
import ErrorMessage from '../CustomStyling/CustomStyling';

const GOOGLE_ID = process.env.REACT_APP_GOOGLE_ID;
// const GOOGLE_SECRET = process.env.REACT_APP_GOOGLE_SECRET;
/**
 * This is a regular button for continue with Google feature
 * We have used gapi-script library {@link https://www.npmjs.com/package/gapi-script} and GoogleLogin component {@link https://www.npmjs.com/package/react-google-login }
 * @returns {React.Component}
 */
function ContinueWithGoogle() {
  const navigate = useNavigate();
  const [unAuthorized, setUnAuthorized] = useState(false);
  useEffect(() => {
    const initClient = () => {
      gapi.client.init({
        clientId: GOOGLE_ID,
        scope: ''
      });
    };
    gapi.load('client:auth2', initClient);
  });

  const onSuccess = async (res) => {
    const userData = await continueWithGoogle(res.tokenObj.id_token);
    if (userData) {
      setUnAuthorized(false);
      navigate('/');
    } else {
      setUnAuthorized(true);
    }
  };
  const onFailure = (err) => {
    console.log('failed:', err);
  };
  return (
    &lt;>
      {' '}
      &lt;GoogleLogin
        clientId={GOOGLE_ID}
        render={(renderProps) => (
          &lt;GeneralButton
            onClick={renderProps.onClick}
            text="Continue With Google"
            icon={&lt;FcGoogle size={25} />}
          />
        )}
        onSuccess={onSuccess}
        onFailure={onFailure}
        cookiePolicy="single_host_origin"
        isSignedIn={false}
      />
      {unAuthorized &amp;&amp; &lt;ErrorMessage>Error in authorization&lt;/ErrorMessage>}
    &lt;/>
  );
}
export default ContinueWithGoogle;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#ContinueWithGoogle">ContinueWithGoogle</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Sat Dec 24 2022 15:32:38 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
